# Crunchyroll Video Management Tools

This is a CLI script to help organize your anime series to be ready for Kodi Playback. It can download the series using `Crunchyroll` Downloader that downloads your series that automatically organize the directories by Seasons and name the file compatible with Kodi naming conventions.

---

# Crunchyroll Downloader

## Description

Crunchyroll Downloader is a command-line tool designed to download series from Crunchyroll using the `crunchy-cli` tool. It supports downloading series with a naming convention compatible with Kodi Media Center.

## Features

- Download series with customizable subtitle and audio language filters.
- Create a new directory for each series or operate within an existing directory.
- Merge streams for different dubs to ensure consistent video length.
- Validate inputs for email, series URL, and language selections.

## Prerequisites

- `crunchy-cli` tool: Install it from [crunchy-labs/crunchy-cli](https://github.com/crunchy-labs/crunchy-cli).
- `pwd` and `mkdir` commands: Ensure these are available in your system.

## Installation

1. Clone this repository or download the `crunchyroll-downloader-v2.sh` script.
2. Make the script executable: `chmod +x crunchyroll-downloader-v2.sh`.

## Usage

```bash
./crunchyroll-downloader-v2.sh EMAIL PASSWORD SERIES_URL [Options...]
```

### Options

- `-s` Subtitle filtering: Specify subtitle languages (comma-separated). Default: `en-US,fr-FR`.
- `-a` Audio filtering: Specify audio languages (comma-separated). Default: `ja-JP,en-US,fr-FR`.
- `-t` Title: Specify a title for the series. If not provided, the script assumes it's already in the show folder.
- `-m` Streams merging: Set to `auto`, `video`, or `audio` to download additional video streams for every version. Default: `audio`.

### Example

```bash
./crunchyroll-downloader-v2.sh 'myemail@example.com' 'mypassword' https://www.crunchyroll.com/series/12345 -s en-US,fr-FR -a ja-JP,en-US,fr-FR -t "My Series Title" -m auto
```

## TODO

- [ ] Generate folders automatically that display the series title and the year [See output template options](https://github.com/crunchy-labs/crunchy-cli?tab=readme-ov-file#output-template-options)

---

# Crunchyroll Stream Extractor

## Description

Crunchyroll Stream Extractor is a command-line tool designed to extract streams from MKV videos generated by `crunchy-cli` or `crunchyroll-downloader`. It separates every audio and subtitles languages into their own single files, operating in bulk for files in the operating directory.

## Features

- Extracts audio and subtitle streams from MKV files.
- Supports bulk extraction for all files in the current directory.
- Separates audio and subtitle streams into individual files.

## Prerequisites

- `ffmpeg` and `ffprobe`: Ensure these are installed and available in your system.

## Installation

1. Clone this repository or download the `crunchyroll-stream-extractor.sh` script.
2. Make the script executable: `chmod +x crunchyroll-stream-extractor.sh`.

## Usage

```bash
./crunchyroll-stream-extractor.sh
```

### Example

```bash
./crunchyroll-stream-extractor.sh
```

## TODO

- [ ] Change the probe function to generate JSON instead of plain text file

---

# Crunchyroll Stream Merger

## Description

Crunchyroll Stream Merger is a command-line tool designed to merge audio and subtitle streams into MKV files. It supports merging streams for different dubs to ensure consistent video length and provides options for customizing the output.

## Features

- Merges audio and subtitle streams into MKV files.
- Supports customization of audio and subtitle streams.
- Provides options for merging streams for different dubs.

## Prerequisites

- `ffmpeg`: Ensure it is installed and available in your system.

## Installation

1. Clone this repository or download the `crunchyroll-stream-merger.sh` script.
2. Make the script executable: `chmod +x crunchyroll-stream-merger.sh`.

## Usage

```bash
./crunchyroll-stream-merger.sh [dub,vf,419-dub,es-dub] [en-US,fr-FR,es-419,es-ES]
```

### Example

```bash
./crunchyroll-stream-merger.sh dub,vf en-US,fr-FR
```

## TODO

- [ ] Add `eval` command instead of echoing out the ffmpeg commands into a file 

---

## Contributing

Contributions are welcome! Please feel free to submit issues or pull requests.

## License

This project is licensed under the MIT License. See the `LICENSE` file for details.